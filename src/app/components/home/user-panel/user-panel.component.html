<ng-template #loadContainer></ng-template>

<mat-card class="panel-container">
  <mat-card-actions class="panel-actions">
    <app-theme-switch></app-theme-switch>
    <mat-icon class="close-btn" (click)="closePage()">close</mat-icon>
  </mat-card-actions>

  <div class="user-panel">
    <label for="fileInput" class="profile-label">
      <div class="image-container">
        <img
          appUpdateProfilePhoto
          [isDark]="isDark"
          [pathImage]="user?.profilePhoto"
          class="profile-image"
          alt="foto de perfil com moldura circular" />
      </div>
      <input
        id="fileInput"
        type="file"
        accept="image/*"
        (change)="onFileSelected($event)" />
    </label>

    <div class="user-info">
      <p class="name">{{ user?.name }}</p>
      <p class="email">{{ user?.email }}</p>
      <button class="edit" mat-flat-button color="accent">Editar dados</button>
    </div>
  </div>
  <div class="user-books">
    <h1>Seus livros favoritados:</h1>
    <section class="favorite-books" *ngFor="let book of getFavoriteBooks()">
      <mat-card>
        <mat-card-header>
          <img
            [src]="
              book.volumeInfo.imageLinks
                ? book.volumeInfo.imageLinks.thumbnail
                : 'assets/images/empty-book.png'
            "
            alt="capa do livro {{ book.volumeInfo.title }}" />
        </mat-card-header>
        <mat-card-content>
          <mat-card-title>{{ book.volumeInfo.title }}</mat-card-title>
          <mat-card-subtitle>{{
            book.volumeInfo.authors.join(', ')
          }}</mat-card-subtitle>
        </mat-card-content>
        <mat-card-actions>
          <app-favorite-book-icon
            [book]="book"
            [favorite]="true"></app-favorite-book-icon>
          <mat-icon class="color-primary">stars</mat-icon>
          <span>{{
            book.volumeInfo.averageRating ? book.volumeInfo.averageRating : 0
          }}</span>
        </mat-card-actions>
      </mat-card>
    </section>
  </div>
</mat-card>
